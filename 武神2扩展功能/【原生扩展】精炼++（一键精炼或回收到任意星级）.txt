（上次潜能计算器的 HTML 文件手机上不好打开，这次就直接用 txt 了）

完全基于原生扩展功能的精炼工具，无需脚本。原理是扩展的“提示/描述/说明”一栏可以直接写 HTML。

目前可以通过滑块调节，一键精炼或回收到任意指定星级，并且显示将消耗（或回收）的玄晶数量。

安装方法同潜能计算器：
1. 设置-扩展-添加新的扩展
2. “提示/描述/说明”把最后提供的代码粘贴上去
3. “可用选项”选择“背包道具”，底下最大的那个框填一个空格
4. 保存并启用，这时你应该会看到“「精炼++」扩展已加载，请在背包中查看”字样

=====下面是粘贴在“提示/描述/说明”的代码（版本：2025.11.12；请尽量使用最新版）=====

<div id="jinglian-plus-plus"style="display: block; color: #C0C0C0"><div style="display: flex; flex-direction: column;"><div style="display: flex; align-items: center; gap: 8px; margin: 4px 16px;"><div id="jinglian-slider"style="flex: 1; min-width: 0;"><input type="range"min="0"max="12"step="1"value="0"id="jinglian-slider-input"style="width: 100%; height: 2px; outline: none;"/></div><div id="jinglian-slider-number"style="min-width: 2em; text-align: center; font-weight: bold;"></div></div><div style="display: flex; justify-content: space-between; align-items: center; padding: 0 4px; margin: 4px 16px; flex-wrap: wrap;"><div style="display: flex; align-items: center; gap: 4px"><span>⟶</span><span class="item-commands"><span id="jinglian-preview"></span></span></div><div><span id="jinglian-cost"></span><span>&nbsp;玄晶</span></div></div></div></div><script>"use strict";(function(){const container=document.getElementById("jinglian-plus-plus");function exitAndClear(errorMessage){if(errorMessage){console.error("[Jinglian++]",errorMessage);container.innerHTML=`<hir>「精炼++」无法在此环境下运行，错误信息：${errorMessage}</hir>`}else{container.remove()}}if(!container){console.error("[Jinglian++] 无法获取扩展元素");return}if(document.querySelectorAll('div[id="jinglian-plus-plus"]').length>1){exitAndClear("扩展元素出现多次");return}const parent=container.parentElement;if(parent.classList.contains("title")&&parent.parentElement.classList.contains("setting-item")&&parent.parentElement.parentElement.classList.contains("extend-list")){container.style.display="inline-block";container.innerHTML=`<hig>「精炼++」扩展已加载，请在背包中查看</hig>`;return}const itemCommands=parent.parentElement;if(!itemCommands||!itemCommands.classList.contains("item-commands")){exitAndClear("无法获取 item-command 元素");return}itemCommands.replaceChild(container,parent);const inGameID=(function(){for(const commandSpan of itemCommands.children){if(commandSpan.tagName==="SPAN"&&commandSpan.innerHTML==="精炼"){const command=commandSpan.getAttribute("cmd");const match=command.match(/^jinglian\s+([a-z0-9]+)$/);if(match){return match[1]}else{continue}}}return""})();if(!inGameID){exitAndClear();return}const toolContainer=itemCommands.parentElement;const toolElm=toolContainer.classList.contains("obj-list")?itemCommands.previousElementSibling.firstChild:toolContainer.firstChild;const toolName=toolElm.textContent.replace(/^[★☆]+/,'');const toolStars=toolElm.textContent.match(/^[★☆]*/)[0];const toolJinglianTimes=[...toolStars].reduce((sum,char)=>sum+(char==='★'?2:1),0);const toolLevels=[{tag:"WHT",name:"白色",base:0},{tag:"HIG",name:"绿色",base:2},{tag:"HIC",name:"蓝色",base:4},{tag:"HIY",name:"黄色",base:6},{tag:"HIZ",name:"紫色",base:8},{tag:"HIO",name:"橙色",base:10},];const toolLevel=(function(){for(const toolLevelsItem of toolLevels){if(toolElm.tagName===toolLevelsItem.tag){return toolLevelsItem}}return null})();if(toolLevel.name==="白色"){exitAndClear();return}if(!toolLevel){console.log("[Jinglian++] not any available color");exitAndClear("不支持此颜色等级");return}if(typeof window.xuanjing==='undefined'||window.xuanjing===null){window.xuanjing=0}if(toolContainer.classList.contains("obj-list")){for(const packItem of toolContainer.children){if(packItem.tagName==="DIV"&&packItem.classList.contains("obj-item")&&packItem.classList.contains("grade1")&&packItem.innerHTML.match(/^<hig>玄晶<\/hig><span class="obj-value">\d+块<\/span>$/)){window.xuanjing=parseInt(packItem.textContent.match(/\d+/)[0]);break}}}const jinglianCost=document.getElementById("jinglian-cost");const jinglianPreview=document.getElementById("jinglian-preview");const jinglianSliderNumber=document.getElementById("jinglian-slider-number");const jinglianPreviewContent=document.createElement(toolElm.tagName);jinglianPreviewContent.textContent=toolStars+toolName;jinglianPreview.appendChild(jinglianPreviewContent);let previewJinglianTimes=toolJinglianTimes;const jinglianSliderInput=document.getElementById("jinglian-slider-input");jinglianSliderInput.addEventListener("click",(event)=>{event.stopPropagation()});jinglianSliderInput.value=toolJinglianTimes.toString();UpdatePreview();jinglianSliderInput.addEventListener("input",(event)=>{previewJinglianTimes=parseInt(event.target.value);UpdatePreview()});function CalculateCost(times){return toolLevel.base*(2**times-1)}function UpdatePreview(){jinglianSliderNumber.textContent=`+${previewJinglianTimes}`;jinglianSliderNumber.style.color=["#C0C0C0","#00FF00","#00FF00","#00FFFF","#00FFFF","#FFFF00","#FFFF00","#912CEE","#912CEE","#FFA500","#FFA500","#FF4500","#FF4500",][previewJinglianTimes];const alreadyCost=CalculateCost(toolJinglianTimes);const previewCost=CalculateCost(previewJinglianTimes);if(previewJinglianTimes<toolJinglianTimes){jinglianCost.textContent=`${xuanjing}+${alreadyCost-previewCost}`;jinglianCost.style.color="#00FFFF";jinglianPreview.setAttribute("cmd",("#unjinglian "+inGameID+";"+("jinglian "+inGameID+" ok;").repeat(previewJinglianTimes)).slice(0,-1));jinglianPreview.style.cursor="pointer"}else if(previewJinglianTimes===toolJinglianTimes){jinglianCost.textContent=`${xuanjing}`;jinglianCost.style.color="#C0C0C0";jinglianPreview.removeAttribute("cmd");jinglianPreview.style.cursor="default"}else if(previewJinglianTimes>toolJinglianTimes){jinglianCost.textContent=`${xuanjing}-${previewCost-alreadyCost}`;if(xuanjing>=(previewCost-alreadyCost)){jinglianCost.style.color="#00FF00";if(previewJinglianTimes>=12){jinglianPreview.setAttribute("cmd","#jinglian "+inGameID+" full")}else{jinglianPreview.setAttribute("cmd",("#"+("jinglian "+inGameID+" ok;").repeat(previewJinglianTimes-toolJinglianTimes)).slice(0,-1))}jinglianPreview.style.cursor="pointer"}else{jinglianCost.style.color="#800000";jinglianPreview.removeAttribute("cmd");jinglianPreview.style.cursor="not-allowed"}}else{console.log("[Jinglian++] WTF???")}jinglianPreviewContent.textContent="★".repeat(parseInt(previewJinglianTimes/2))+"☆".repeat(previewJinglianTimes%2)+toolName}})();function runCommand(cmd){const tempoElm=document.createElement("div");tempoElm.setAttribute("cmd",cmd);tempoElm.click();console.log(`[Jinglian++]Executed\"${cmd}\"`);tempoElm.remove()}</script>